var _0x9724=['whatPathFileConfig','safeLoad','readFileSync','utf-8','app','gral','credentials_time_minutes','minutes','unix','encode','secret_api_key','alg','setHeader','content-type','application/text;charset=utf-8','status','send','stringify','newPassword','\x0a\x20\x20\x20\x20UPDATE\x20usuarios\x20SET\x20password=?\x0a\x20\x20\x20\x20WHERE\x20login=?\x20AND\x20password=?','affectedRows','/usuarios/restablecer-credenciales-usuario','ensureAuthenticated','tipo','SELECT\x20*\x20FROM\x20usuarios\x20WHERE\x20login=?','\x0a\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20usuarios(login,password,estado,tipo)\x20VALUES\x20(?,?,1,?)','\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20usuarios\x20SET\x20password=?\x20,\x20estado=1\x20,\x20tipo=?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20login=?','/usuarios/update-estado','usuario','toString','UPDATE\x20usuarios\x20set\x20estado=?\x20where\x20login=?\x0a\x20\x20\x20\x20','\x0a\x20\x20SELECT\x20nombres,apellido_paterno,apellido_materno,\x0a\x20\x20correo_electronico\x20,codigo_biometrico\x20FROM\x20servidores_publicos\x0a\x20\x20WHERE\x20numero_documento=?','get','/usuarios','\x0a\x20\x20SELECT\x20*\x0a\x20\x20\x20FROM\x20usuarios','/usuarios/add','\x0a\x20\x20INSERT\x20INTO\x20usuarios(login,password,tipo,estado)\x20values\x20(?,?,?,1)','/usuarios/delete','/usuarios/habilitar-desabilitar-usuario','estado','\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20usuarios\x20SET\x20estado=?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20login=?','/usuarios/cambiar-tipo-usuario','\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20usuarios\x20SET\x20tipo=?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20login=?','exports','moment','express','Router','../../databaseMysql','../../middleware','js-yaml','post','/usuarios/autenticar','body','json','login','password','query','\x0a\x20\x20SELECT\x20login\x20as\x20CarnetIdentidad,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tipo\x20as\x20Tipo,\x20estado\x20as\x20Estado\x0a\x20\x20FROM\x20usuarios\x0a\x20\x20WHERE\x20login=?\x20AND\x20password=?','parse','length','../../os'];(function(_0x29d659,_0xfb96a5){var _0x109dfd=function(_0x1685cc){while(--_0x1685cc){_0x29d659['push'](_0x29d659['shift']());}};_0x109dfd(++_0xfb96a5);}(_0x9724,0x120));var _0x2eb8=function(_0x21bc60,_0x2a202a){_0x21bc60=_0x21bc60-0x0;var _0x1328aa=_0x9724[_0x21bc60];return _0x1328aa;};const jwt=require('jwt-simple');const moment=require(_0x2eb8('0x0'));const express=require(_0x2eb8('0x1'));const router=express[_0x2eb8('0x2')]();const mysqldb=require(_0x2eb8('0x3'));const middleware=require(_0x2eb8('0x4'));const fs=require('fs');const yaml=require(_0x2eb8('0x5'));router[_0x2eb8('0x6')](_0x2eb8('0x7'),(_0x14f3f1,_0x205509,_0x4e1059)=>{const _0x199c69=JSON['parse'](_0x14f3f1[_0x2eb8('0x8')][_0x2eb8('0x9')]);const _0xc9d2d7=_0x199c69[_0x2eb8('0xa')];const _0x52df8b=_0x199c69[_0x2eb8('0xb')];mysqldb[_0x2eb8('0xc')](_0x2eb8('0xd'),[_0xc9d2d7,_0x52df8b],(_0x8de132,_0x221764)=>{if(_0x8de132)throw _0x8de132;_0x221764=JSON[_0x2eb8('0xe')](JSON['stringify'](_0x221764));if(_0x221764[_0x2eb8('0xf')]){let _0x223fb1=require(_0x2eb8('0x10'));var _0x30c58a=_0x223fb1[_0x2eb8('0x11')]();const _0x46e7eb=yaml[_0x2eb8('0x12')](fs[_0x2eb8('0x13')](_0x30c58a,_0x2eb8('0x14')));var _0x273726=JSON[_0x2eb8('0xe')](JSON['stringify'](_0x46e7eb));const _0x48e851={'sub':_0xc9d2d7,'data':_0x221764[0x0],'iat':moment()['unix'](),'exp':moment()['add'](_0x273726[_0x2eb8('0x15')][_0x2eb8('0x16')][_0x2eb8('0x17')],_0x2eb8('0x18'))[_0x2eb8('0x19')]()};const _0x18f728=jwt[_0x2eb8('0x1a')](_0x48e851,_0x273726[_0x2eb8('0x15')][_0x2eb8('0x16')][_0x2eb8('0x1b')],_0x273726[_0x2eb8('0x15')][_0x2eb8('0x16')][_0x2eb8('0x1c')]);_0x205509[_0x2eb8('0x1d')](_0x2eb8('0x1e'),_0x2eb8('0x1f'));_0x205509[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')](JSON[_0x2eb8('0x22')]({'success':!![],'result':_0x18f728}));}else{_0x205509['status'](0xc8)['send'](JSON['stringify']({'success':![]}));}});});router[_0x2eb8('0x6')]('/usuarios/update-password',middleware['ensureAuthenticated'],(_0x198249,_0x2d92e0,_0x2d54e6)=>{const _0x3dff38=JSON[_0x2eb8('0xe')](_0x198249[_0x2eb8('0x8')]['json']);const _0x30cb5b=_0x3dff38[_0x2eb8('0xa')];const _0x4a7a5d=_0x3dff38[_0x2eb8('0xb')];const _0x211de8=_0x3dff38[_0x2eb8('0x23')];mysqldb['query'](_0x2eb8('0x24'),[_0x211de8,_0x30cb5b,_0x4a7a5d],function(_0x46bf87,_0x4156ff){if(_0x46bf87)throw _0x46bf87;_0x2d92e0['status'](0xc8)[_0x2eb8('0x21')](JSON[_0x2eb8('0x22')]({'success':_0x4156ff[_0x2eb8('0x25')]?!![]:![],'result':_0x4156ff[_0x2eb8('0x25')]?!![]:![]}));});});router[_0x2eb8('0x6')](_0x2eb8('0x26'),middleware[_0x2eb8('0x27')],(_0x3694b5,_0x9a580c,_0x527705)=>{const _0x37e6d4=JSON['parse'](_0x3694b5[_0x2eb8('0x8')][_0x2eb8('0x9')]),_0x5294c9=_0x37e6d4['login'],_0x26b3b8=_0x37e6d4[_0x2eb8('0xb')],_0x2576b8=_0x37e6d4[_0x2eb8('0x28')];mysqldb[_0x2eb8('0xc')](_0x2eb8('0x29'),[_0x5294c9],(_0x9c13b5,_0xa5cb5b)=>{if(_0x9c13b5)throw _0x9c13b5;if(!_0xa5cb5b[_0x2eb8('0xf')]){mysqldb[_0x2eb8('0xc')](_0x2eb8('0x2a'),[_0x5294c9,_0x26b3b8,_0x2576b8],function(_0x70592b,_0xa5cb5b){if(_0x70592b)throw _0x70592b;_0x9a580c[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')](JSON['stringify']({'success':_0xa5cb5b[_0x2eb8('0x25')]?!![]:![],'result':_0xa5cb5b[_0x2eb8('0x25')]?!![]:![]}));});}else{mysqldb['query'](_0x2eb8('0x2b'),[_0x26b3b8,_0x2576b8,_0x5294c9],function(_0x98c05a,_0xa5cb5b){if(_0x98c05a)throw _0x98c05a;_0x9a580c[_0x2eb8('0x20')](0xc8)['send'](JSON['stringify']({'success':_0xa5cb5b[_0x2eb8('0x25')]?!![]:![],'result':_0xa5cb5b[_0x2eb8('0x25')]?!![]:![]}));});}});});router[_0x2eb8('0x6')](_0x2eb8('0x2c'),middleware[_0x2eb8('0x27')],(_0x2cdbe9,_0x39ef52,_0x2b0f71)=>{let _0x18736=JSON[_0x2eb8('0xe')](_0x2cdbe9[_0x2eb8('0x8')][_0x2eb8('0x9')]);let _0x1055d7=_0x18736['estado'];let _0x198b10=_0x18736[_0x2eb8('0x2d')][_0x2eb8('0x2e')]()['split']('\x20')[0x0];mysqldb[_0x2eb8('0xc')](_0x2eb8('0x2f'),[_0x1055d7,_0x198b10],(_0x1ecee2,_0x34f76c,_0x25438b)=>{if(_0x1ecee2){throw _0x1ecee2;}_0x39ef52[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')]({'success':_0x34f76c['affectedRows']?!![]:![],'result':_0x34f76c});});});router[_0x2eb8('0x6')]('/usuarios/recovery-info-authentication',(_0xaf2738,_0x1505f1,_0x2ac29c)=>{const _0x32c5b3=JSON['parse'](_0xaf2738[_0x2eb8('0x8')]['json']);const _0x374027=_0x32c5b3['numeroDocumento'];mysqldb[_0x2eb8('0xc')](_0x2eb8('0x30'),[_0x374027],(_0x44d018,_0x3448fa)=>{if(_0x44d018)throw _0x44d018;_0x1505f1[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')]({'success':_0x3448fa,'result':_0x3448fa});});});router[_0x2eb8('0x31')](_0x2eb8('0x32'),middleware[_0x2eb8('0x27')],(_0x1399ae,_0x252fda,_0x591fe1)=>{mysqldb['query'](_0x2eb8('0x33'),function(_0x548147,_0x4e6af1){if(_0x548147)throw _0x548147;_0x252fda[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')]({'success':_0x4e6af1[_0x2eb8('0xf')]?!![]:![],'result':_0x4e6af1});});});router[_0x2eb8('0x6')](_0x2eb8('0x34'),(_0x275b9b,_0x167b00,_0x3b598d)=>{const _0x31452e=JSON['parse'](_0x275b9b[_0x2eb8('0x8')][_0x2eb8('0x9')]);const _0x3f5b11=_0x31452e['login'];const _0x354dca=_0x31452e['password'];const _0x508b79=_0x31452e[_0x2eb8('0x28')];mysqldb[_0x2eb8('0xc')](_0x2eb8('0x35'),[_0x3f5b11,_0x354dca,_0x508b79],(_0x22e95b,_0x38d7a0)=>{if(_0x22e95b)throw _0x22e95b;_0x167b00[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')]({'success':_0x38d7a0[_0x2eb8('0x25')]?!![]:![],'result':_0x38d7a0});});});router['post'](_0x2eb8('0x36'),(_0x509671,_0x1e72d0,_0x22c729)=>{const _0x333d47=JSON[_0x2eb8('0xe')](_0x509671[_0x2eb8('0x8')]['json']);const _0x495e87=_0x333d47[_0x2eb8('0xa')];const _0x131df2=_0x333d47[_0x2eb8('0x28')];mysqldb['query']('\x0a\x20\x20DELETE\x20FROM\x20usuarios\x20WHERE\x20login=?\x20AND\x20tipo=?',[_0x495e87,_0x131df2],(_0x5e1f4b,_0x52306f)=>{if(_0x5e1f4b)throw _0x5e1f4b;_0x1e72d0[_0x2eb8('0x20')](0xc8)['send']({'success':_0x52306f['affectedRows']?!![]:![],'result':_0x52306f});});});router['post'](_0x2eb8('0x37'),middleware[_0x2eb8('0x27')],(_0x4d2f33,_0x5e1ea9,_0x5ecca2)=>{const _0x4007f5=JSON[_0x2eb8('0xe')](_0x4d2f33[_0x2eb8('0x8')][_0x2eb8('0x9')]),_0x58cf0c=_0x4007f5[_0x2eb8('0xa')],_0x3d0173=!_0x4007f5[_0x2eb8('0x38')];mysqldb['query'](_0x2eb8('0x39'),[_0x3d0173,_0x58cf0c],function(_0x1a1251,_0x4d880c){if(_0x1a1251)throw _0x1a1251;_0x5e1ea9[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')](JSON[_0x2eb8('0x22')]({'success':_0x4d880c[_0x2eb8('0x25')]?!![]:![],'result':_0x4d880c[_0x2eb8('0x25')]?!![]:![]}));});});router[_0x2eb8('0x6')](_0x2eb8('0x3a'),middleware[_0x2eb8('0x27')],(_0xd8f661,_0x503d1f,_0x4a4b57)=>{const _0x580d4d=JSON[_0x2eb8('0xe')](_0xd8f661[_0x2eb8('0x8')]['json']),_0x16b18b=_0x580d4d['login'],_0x1b67fd=_0x580d4d[_0x2eb8('0x28')];mysqldb[_0x2eb8('0xc')](_0x2eb8('0x3b'),[_0x1b67fd,_0x16b18b],function(_0x217f64,_0x4907f7){if(_0x217f64)throw _0x217f64;_0x503d1f[_0x2eb8('0x20')](0xc8)[_0x2eb8('0x21')]({'success':_0x4907f7[_0x2eb8('0x25')]?!![]:![],'result':_0x4907f7});});});module[_0x2eb8('0x3c')]=router;